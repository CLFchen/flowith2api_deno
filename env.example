# ============ 基础配置 ============
PORT=8787
LOG_LEVEL=info

# ============ 服务器模式 ============
# 启用用户密钥管理系统（true=多用户模式，false=传统模式）
IS_SERVER=false

# ============ 上游 Flowith 配置 ============
# 上游 Flowith Tokens（逗号分隔）
FLOWITH_AUTH_TOKENS=your-flowith-token-1,your-flowith-token-2,your-flowith-token-3

# Token 同步模式（0=差异同步，1=完全同步）
RSYNC=0

# 上游服务地址（可选，默认使用官方地址）
FLOWITH_BASE=
FLOWITH_REGION=

# ============ 鉴权配置 ============
# API 访问密钥（逗号分隔，传统模式使用）
API_KEYS=sk-your-api-key-1,sk-your-api-key-2

# 管理员密钥（用于访问管理面板）
ADMIN_KEY=sk-your-admin-key

# 跳过认证（仅用于本地测试，生产环境请设为 false）
SKIP_AUTH=false

# ============ Token 自动管理 ============
# 自动删除失败的上游 Token
AUTO_REMOVE_FAILED_TOKENS=true

# 失败阈值（连续失败多少次后自动删除）
MAX_TOKEN_FAILURES=3

# ============ 超时配置 ============
# 上游请求头部超时（毫秒）
UPSTREAM_TIMEOUT_MS=25000

# 上游响应体超时（毫秒）
UPSTREAM_BODY_TIMEOUT_MS=30000

# 流式响应空闲超时（毫秒）
STREAM_IDLE_TIMEOUT_MS=15000

# 流式响应总超时（毫秒）
STREAM_TOTAL_TIMEOUT_MS=180000

# ============ 重试配置 ============
# 最大重试次数
UPSTREAM_RETRY_MAX=3

# 重试退避基础时间（毫秒）
UPSTREAM_RETRY_BACKOFF_MS=200

# SSE 空返回时重试
SSE_RETRY_ON_EMPTY=true

# SSE 最小内容长度（低于此值视为空返回）
SSE_MIN_CONTENT_LENGTH=10

# ============ 长上下文支持 ============
# 启用会话上下文管理
ENABLE_LONG_CONTEXT=true

# 最大保存的消息数量
MAX_CONTEXT_MESSAGES=20

# 会话 TTL（秒）
CONTEXT_TTL_SECONDS=3600

# ============ 思考注入 ============
# 启用思考提示注入
ENABLE_THINKING_INJECTION=true

# 思考提示内容
THINKING_PROMPT="Please think step by step before answering."

# ============ MCP 工具 ============
# 启用 MCP 工具支持
ENABLE_MCP=true

# 可用工具列表（逗号分隔）
MCP_TOOLS=web_search,image_gen,code_interpreter

# ============ Deno KV 配置 ============
# 启用 Deno KV 持久化存储
USE_DENO_KV=true

# 自定义 KV 数据库路径（可选）
DENO_KV_PATH=

